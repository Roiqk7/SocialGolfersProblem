# AI Generated

name: Python Tests

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: ["3.11"]

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v5
      with:
        python-version: ${{ matrix.python-version }}
        
    - name: Install C++ build tools (for Glucose) üõ†Ô∏è
      run: |
        sudo apt-get update
        # Install build-essential (g++ and make) and zlib1g-dev (Glucose dependency)
        sudo apt-get install -y build-essential zlib1g-dev

    - name: Build Glucose SAT Solver üß©
      run: |
        # 1. Create the base directory structure
        mkdir -p glucose
        cd glucose
        
        # 2. Download the source code for Glucose 4.1
        wget -q https://www.labri.fr/perso/lsimon/research/glucose/glucose-syrup-4.1.tgz
        
        # 3. Extract the source code
        tar -xzf glucose-syrup-4.1.tgz
        
        # 4. Rename the extracted folder to 'simp' to match the expected path (glucose/simp/glucose)
        mv glucose-syrup-4.1 simp 
        
        # 5. Compile the solver within the 'simp' directory
        cd simp
        make
        
        # 6. Verify the executable exists (optional but helpful for debugging)
        ls -l glucose
        
        # Go back to the repository root
        cd ../..

    - name: Install Python dependencies
      run: |
        python -m pip install --upgrade pip
        pip install coloredlogs 
        # TODO: If you create a requirements.txt, you can uncomment the line below:
        # pip install -r requirements.txt

    - name: Run tests with unittest/pytest
      # Uses the built-in unittest discover command to find tests in src/core/test.py
      run: |
        python -m unittest discover -s src/core -p "test.py"
